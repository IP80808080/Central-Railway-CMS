const c2Schema = require("../../model/checklistModel/ModelC2");
// const pdfGenerator = require("../helper/pdfGenerator");

exports.submitChecklistC2 = async (req, res) => {
  console.log(req.body);
  try {
    const {
      equipmentNumber,
      uid,
      make,
      mfg,
      date_1,
      date_2,
      date_3,
      date_4,
      date_5,
      date_6,
      date_7,
      date_8,
      date_9,
      date_10,
      date_11,
      date_12,
      loco_no_1,
      loco_no_2,
      loco_no_3,
      loco_no_4,
      loco_no_5,
      loco_no_6,
      loco_no_7,
      loco_no_8,
      loco_no_9,
      loco_no_10,
      loco_no_11,
      loco_no_12,
      reason_1,
      reason_2,
      reason_3,
      reason_4,
      reason_5,
      reason_6,
      reason_7,
      reason_8,
      reason_9,
      reason_10,
      reason_11,
      reason_12,
      defect_1,
      defect_2,
      defect_3,
      defect_4,
      defect_5,
      defect_6,
      defect_7,
      defect_8,
      defect_9,
      defect_10,
      defect_11,
      defect_12,
      date_OH_1,
      date_OH_2,
      date_OH_3,
      date_OH_4,
      date_OH_5,
      date_OH_6,
      date_OH_7,
      date_OH_8,
      date_OH_9,
      date_OH_10,
      date_OH_11,
      date_OH_12,
      oh_1,
      oh_2,
      oh_3,
      oh_4,
      oh_5,
      oh_6,
      oh_7,
      oh_8,
      oh_9,
      oh_10,
      oh_11,
      of_12,
      cb_12,
      c_12,
      free_1,
      free_2,
      free_3,
      free_4,
      free_5,
      free_6,
      free_7,
      free_8,
      free_9,
      free_10,
      free_11,

      condition_1,
      condition_2,
      condition_3,
      condition_4,
      condition_5,
      condition_6,
      condition_7,
      condition_8,
      condition_9,
      condition_10,
      condition_11,

      cleaning_1,
      cleaning_2,
      cleaning_3,
      cleaning_4,
      cleaning_5,
      cleaning_6,
      cleaning_7,
      cleaning_8,
      cleaning_9,
      cleaning_10,
      cleaning_11,

      body_1,
      body_2,
      body_3,
      body_4,
      body_5,
      body_6,
      body_7,
      body_8,
      body_9,
      body_10,
      body_11,

      provided_1,
      provided_2,
      provided_3,
      provided_4,
      provided_5,
      provided_6,
      provided_7,
      provided_8,
      provided_9,
      provided_10,
      provided_11,
      provided_12,
      apply_pressure_1,
      apply_pressure_2,
      apply_pressure_3,
      apply_pressure_4,
      apply_pressure_5,
      apply_pressure_6,
      apply_pressure_7,
      apply_pressure_8,
      apply_pressure_9,
      apply_pressure_10,
      apply_pressure_11,

      apply_3_1,
      apply_3_2,
      apply_3_3,
      apply_3_4,
      apply_3_5,
      apply_3_6,
      apply_3_7,
      apply_3_8,
      apply_3_9,
      apply_3_10,
      apply_3_11,

      leakage_1,
      leakage_2,
      leakage_3,
      leakage_4,
      leakage_5,
      leakage_6,
      leakage_7,
      leakage_8,
      leakage_9,
      leakage_10,
      leakage_11,

      provided_in_loco_1,
      provided_in_loco_2,
      provided_in_loco_3,
      provided_in_loco_4,
      provided_in_loco_5,
      provided_in_loco_6,
      provided_in_loco_7,
      provided_in_loco_8,
      provided_in_loco_9,
      provided_in_loco_10,
      provided_in_loco_11,

      technician_sign_1,
      technician_sign_2,
      technician_sign_3,
      technician_sign_4,
      technician_sign_5,
      technician_sign_6,
      technician_sign_7,
      technician_sign_8,
      technician_sign_9,
      technician_sign_10,
      technician_sign_11,

      supervisior_sign_1,
      supervisior_sign_2,
      supervisior_sign_3,
      supervisior_sign_4,
      supervisior_sign_5,
      supervisior_sign_6,
      supervisior_sign_7,
      supervisior_sign_8,
      supervisior_sign_9,
      supervisior_sign_10,
      supervisior_sign_11,
    } = req.body;

    if (!equipmentNumber || !uid) {
      return res.status(400).json({ error: "Missing required fields" });
    }

    const checklist = await c2Schema.create({
      equipmentNumber,
      uid,
      make,
      mfg,
      date_1,
      date_2,
      date_3,
      date_4,
      date_5,
      date_6,
      date_7,
      date_8,
      date_9,
      date_10,
      date_11,
      date_12,
      loco_no_1,
      loco_no_2,
      loco_no_3,
      loco_no_4,
      loco_no_5,
      loco_no_6,
      loco_no_7,
      loco_no_8,
      loco_no_9,
      loco_no_10,
      loco_no_11,
      loco_no_12,
      reason_1,
      reason_2,
      reason_3,
      reason_4,
      reason_5,
      reason_6,
      reason_7,
      reason_8,
      reason_9,
      reason_10,
      reason_11,
      reason_12,
      defect_1,
      defect_2,
      defect_3,
      defect_4,
      defect_5,
      defect_6,
      defect_7,
      defect_8,
      defect_9,
      defect_10,
      defect_11,
      defect_12,
      date_OH_1,
      date_OH_2,
      date_OH_3,
      date_OH_4,
      date_OH_5,
      date_OH_6,
      date_OH_7,
      date_OH_8,
      date_OH_9,
      date_OH_10,
      date_OH_11,
      date_OH_12,
      oh_1,
      oh_2,
      oh_3,
      oh_4,
      oh_5,
      oh_6,
      oh_7,
      oh_8,
      oh_9,
      oh_10,
      oh_11,
      of_12,
      cb_12,
      c_12,
      free_1,
      free_2,
      free_3,
      free_4,
      free_5,
      free_6,
      free_7,
      free_8,
      free_9,
      free_10,
      free_11,

      condition_1,
      condition_2,
      condition_3,
      condition_4,
      condition_5,
      condition_6,
      condition_7,
      condition_8,
      condition_9,
      condition_10,
      condition_11,

      cleaning_1,
      cleaning_2,
      cleaning_3,
      cleaning_4,
      cleaning_5,
      cleaning_6,
      cleaning_7,
      cleaning_8,
      cleaning_9,
      cleaning_10,
      cleaning_11,

      body_1,
      body_2,
      body_3,
      body_4,
      body_5,
      body_6,
      body_7,
      body_8,
      body_9,
      body_10,
      body_11,

      provided_1,
      provided_2,
      provided_3,
      provided_4,
      provided_5,
      provided_6,
      provided_7,
      provided_8,
      provided_9,
      provided_10,
      provided_11,
      provided_12,
      apply_pressure_1,
      apply_pressure_2,
      apply_pressure_3,
      apply_pressure_4,
      apply_pressure_5,
      apply_pressure_6,
      apply_pressure_7,
      apply_pressure_8,
      apply_pressure_9,
      apply_pressure_10,
      apply_pressure_11,

      apply_3_1,
      apply_3_2,
      apply_3_3,
      apply_3_4,
      apply_3_5,
      apply_3_6,
      apply_3_7,
      apply_3_8,
      apply_3_9,
      apply_3_10,
      apply_3_11,

      leakage_1,
      leakage_2,
      leakage_3,
      leakage_4,
      leakage_5,
      leakage_6,
      leakage_7,
      leakage_8,
      leakage_9,
      leakage_10,
      leakage_11,

      provided_in_loco_1,
      provided_in_loco_2,
      provided_in_loco_3,
      provided_in_loco_4,
      provided_in_loco_5,
      provided_in_loco_6,
      provided_in_loco_7,
      provided_in_loco_8,
      provided_in_loco_9,
      provided_in_loco_10,
      provided_in_loco_11,

      technician_sign_1,
      technician_sign_2,
      technician_sign_3,
      technician_sign_4,
      technician_sign_5,
      technician_sign_6,
      technician_sign_7,
      technician_sign_8,
      technician_sign_9,
      technician_sign_10,
      technician_sign_11,

      supervisior_sign_1,
      supervisior_sign_2,
      supervisior_sign_3,
      supervisior_sign_4,
      supervisior_sign_5,
      supervisior_sign_6,
      supervisior_sign_7,
      supervisior_sign_8,
      supervisior_sign_9,
      supervisior_sign_10,
      supervisior_sign_11,
    });

    // Generate PDF
    // pdfGenerator.generatePDF(fullForm);

    return res
      .status(201)
      .json({ message: "Checklist submitted successfully!" });
  } catch (error) {
    console.error(error);
    if (error.name === "ValidationError") {
      return res
        .status(400)
        .json({ error: "Validation failed", details: error.errors });
    }

    res.status(500).json({ error: "Internal Server Error" });
  }
};
